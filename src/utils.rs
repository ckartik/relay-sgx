
use anyhow::Error;
use serde_json::{Value, from_str};
use revm::{
    db::CacheDB,
    primitives::{AccountInfo, B160, B256, U256 as rU256},
};
use std::str::FromStr;

fn populate_db_from_str<ExtDB: revm::db::DatabaseRef>(db: &mut CacheDB<ExtDB>, data: &str) -> Result<(), Error> {
    let binding = from_str::<Value>(data)?;
    let json = binding.as_array().unwrap();
    
    for acc in json.iter() {
        // println!("account json {:?}", acc);
        let address = B160::from_str(&acc["address"].as_str().unwrap()).unwrap();
        // println!("decoded address {:?}", address);
        let balance = rU256::from_str(&acc["balance"].as_str().unwrap()).unwrap();
        // println!("decoded balance {:?}", balance);   
        let code_hash = B256::from_str(&acc["codeHash"].as_str().unwrap()).unwrap();
        // println!("decoded code_hash {:?}", code_hash);
        let without_prefix = &acc["nonce"].as_str().unwrap().trim_start_matches("0x");
        let nonce = u64::from_str_radix(without_prefix, 16)?;
        // println!("decoded nonce {:?}", nonce);     

        let acc_info = AccountInfo {
            balance: balance,
            code_hash: code_hash,
            code: None,
            nonce: nonce,
        };
        db.insert_account_info(address, acc_info);
        // TODO check account proof 

        // let storage_hash = B256::from_str(&acc["storageHash"].as_str().unwrap()).unwrap();
        // println!("decoded storage_hash {:?}", storage_hash);
        // db.insert_account_storage(address, slot, value);
    }


    Ok(()) 
}

mod tests {
    use revm::{
        primitives::B160,
        db::{CacheDB, EmptyDB, DatabaseRef}
    };
    use crate::utils::populate_db_from_str;
    use std::str::FromStr;

    #[test]
    fn test_populate_db() {
        let acc_json = "[{
            \"address\": \"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\",
            \"balance\": \"0x29c624a7e0660db777c07\",
            \"codeHash\": \"0xd0a06b12ac47863b5c7be4185c2deaad1c61557033f56c7d4ea74429cbb25e23\",
            \"nonce\": \"0x1\",
            \"storageHash\": \"0x86929f2999c4f58bfb6aa1e42dfccfd308623064d45f5ca6667b4efd4f5ee74d\",
            \"accountProof\": [
              \"0xf90211a0fc2be4f31e44b29eb494456eefa63d64e22ef79edba5ba16ff2a32227ed849efa0bab057f8ac371c3757656f26eaa6bd6de1fefea580044d19452d4f5dd8edf225a09105d5cad1b807771ff2325ec93a3c9562cec19d40d2b3ea65c6b3003a44319aa009d802e0ac0fbdd10ae28dad3549f8b35107a62b05f849590e7d7b4cea161c59a0f87d9e4ccec753cb33ecb7bcc900ce894e1df2a594676b8a78302bf3bbbbb8a4a0b48e146145158ee8c8fd553fc3761b9a97e4d78c817cb1e3d4dec07f51b95253a0b8c6f4bb78e7e175de691f83be82efa783421236c94b8f093ecf7b4a6f0c8661a06416edec8d6be9f861567989f559435aa4974a0ba73402845fb1e0de05c25f1ea0d1298beae04cd866cf64f2da011de77a09187a011b2c07d31f06d59214a8f254a0cd52dff9aad51a82956c36818fc0030acaaa16723e1edbbb1370cb7cbaeeea65a0e87deae68f041094fa03eed3580023a18bd50ad760f22c3810fda4b3cf19ced9a0c34c413955f4d29de9ea4e83c1bc2d15669493cc5e13aef5c08d39eb5defa8eaa02752a337df2d5025be6ae2df21e6f7e00957331149c7fa6a2de47c238b9ff3c5a00fc4817a60c66ef657cb8a3078a65fca7cfa1165cddda188bd827f36b27f15b2a0ffb9b87cb4c1500dd733b4579eeb95dd601beec66afc8323944880a95eaed85ca00afa2a4ac6eeb326e3ca3117f978a942d4a796aa60bdfc40ee8736cf72d9475080\",
              \"0xf90211a09ce6c419cc13674aba1d85b882d46d3c463f06507833927b30f6d4f94dddfb24a0230e6cce76dda6cbe227d46a5b83e03acd1734c499fd68c3b2359bf96e5aa43fa0b0dabe48f3975b30dabef05dc632beab43c083f1889fba77d0521c113b8270b8a0fc75a0e1fe9023d5bd49236d40350abc5acc6582044b16ca57ecd56ff1c3bbf3a027194e7728aca2a0d0c772c602a366fa75eb27733cff6c572a71c7d59427cd48a013d3ace673d6f50c2b63a9497bba36abe4403487287f1f57e28d863816aba9e5a062089fd83c255a62be317177acffb1ed8a7ca4c088a358216cdfabf9237f86baa0d4dcfea4da87d32a05c54a6e46d323a382fb9c4560d985bfb17358d084b84d9ca07b2a178d4fc5de935553fa818732cf92ce2fdc19dfaa51cc1eaddb13df9082daa0d6bb043f39346bd2426ca3f71bd0215ebb7d4466f40349292ac348925f87634aa06abb1b8df5a97979e1ac8edd6e6836b57fd9482c569d48b0f5f1377d0b826c48a044a4ffbc5c661ce81906e163de3fcf70e67d0603f1e66e6ca3ca8e8b7655479fa07a112c117bf061eaf3dbf57db33ba44b471dea5ce7977e9f204cac8e8417f80fa0cad78a5850e3c79f6d1e449aa4010b710740bf7289b2abd294b49139039c3e4aa0b966c59221ff3bcd5f62cc5b92761313f5b2aa6985fc1930bf776153c9d9e823a052767031a37f9bb41c47b1e306d739101cc505979e261d4ff8766cb66768b89080\",
              \"0xf90211a0d0454d9729f85dbda4d7f415c5f4efa73aa9c336cadbc63b9652f41f35b249a3a02af9fdf160add78619300458d8b776bf840b2458030520837a4ff92ecd4b5d3ea07abed10fb69b855f55fb78046e69d9270a7c8fa36d29921d05a9dcca94040e76a0f12f8af958511be4cab3d223156f8187b0b23cac40fd2ac88cf2b44f5ba74b05a0304e1fb7f65c61817b534568062e477b64af4126cf23094d28ead1d2b88032ada0a5d0e55b9f3f907b7e663da4433bf9138e3ab0eb477a52d9b73e0048cd445e62a02785c65fc5618b4dd3dccae6760acc472e6381875291bf91c71d38ab38e9821ea02022026a503b368da4906ddad7d6e5e5fa64310f547b439162454f4862cc4c60a0f7906ac782507161a9fe556883a978f9f47fe9495226fba04b4e10ba7048d641a0523e014ab00ef209055acaf4b2f6fabe9c1a142cabf38a9d2696830f7fafb704a02aaacf8ec706edc9b338cde6e86128398e184062de1b55c5a38ab9656178eef8a00c33248b73d0baa83ddc0a37ef33f1867833c6f06674f73d81799b95c1516c56a00cdc363bce0f481510d225e94b4a05d4de4c0002e600f8746540cbd599d503e3a079a42bc71876b5ebba5560d5730b165ccdc759423d8e7db0b60961d947e97475a026982a70b90a7a291a0c9dcf86e5c35cd4f663b57d7bdf3165a11c7856d43d85a0214b6bdb992f84c4e0fbdb04bf73555f221079cdb97eb9fa769abe66d526bcda80\",
              \"0xf90211a0fd8ceae05348757ee0bf8106780643316fc4aea9d6407b046546c39d5125691fa03b991e9eb480545b79903f570b724cd4451a71134dacf3bdc3eb6e8aedebb487a0ea6101e8441bf755c332c90c573d4e574b7c8c5c28c91b9f954b6b767f027b80a0f36cf109e7d409dfb838f48a3eabe6eb73921479f1398b291006ebd1184f6ba5a0197189d25644f2d753efd928424e4a54ef7282637f92a82213a320a4f38386e1a0e3b14c64372c15169413fe474598afc6092b495debe9d261f36b90d1e4d91cd0a015b80f81cf7152ac525aa97b9c3145cf7163c5f8291beb3b1206b4d08458e266a07176ed7e96644a67bfaca574c35aacedd740e3680936576b9ecfaddc11c38bffa0ba8474ff2036fe65e1ef6d9f5d9fe2ec8ecf4461badfd716a0ff929403b9b5a3a0612137f84bff88c3f210db5d38b718c0a46418ab535809af24af26f6be872269a0ad446c97848ecdaa91a151590b967c26d77c1f5ab0fdc33773a1d890f613e58fa01b0c447d3940c9b5dae3eab927adb2dc15e539640f4b1d3aa08ac47e990d2384a0b250cd4ce1c112e13952151fdbdfb8a6b23651fb912b500d733b10089ff80ff9a041078f6dcaa70f4411a6cd4c3f27f6c418dfefae7744f6e863596d46fe91db81a05be82b9fe31c5480e6806a8cec580bd95e08bab8a428996bf9bbbfca7223d6f6a0fb89371b90b2dda3199ca45005168f50862393d508023b433a2a7fc1b44e6b9a80\",
              \"0xf90211a07971ae29678855a7f125501a08e1ebcdca865198f08e677962863d8fdbbbb40ba068ee62ef98b63dfaa43eb7f37f4e7902ae120faa0c10e955b622d2ef08232deca0285818d167120cd13880c14ebcf657ca623507dfc243d35d43c3ac28a0ea2261a0624e849bc7c46245d574004f7da2a663e24668955aa299f2523dc4aea8eca919a04d960a5c4f7f44b0a170e752153ce87e7343ed62f719c362d2a967672ca2bd18a02df143ef4a3e00fdb4ab808f524bef79a2920e5544b4360c2bbeeea0f77d2526a0e0de77ee2c7bff172634d72acdc1cc55bc9b9fba5f1658a6311099fbf372e36ba0d9863dbfb272e93880262560fff7ad4f0574183fb50b1cf9883f128dde8d5401a0e1b4fc8b59ff0cfd9d12c817eefb1910a08437f7c2d47515d9f50b27280a4c53a031798dd545c1b5e6618510c9a3062a3936e6630c2f0ec3e13c43af47ef524d08a008471f0063f39ec10057f21fef4b5446384c47b6c65fd783c1924a22e82b18cba064dccc68015c56f5e4f4eb828e3fe7d122a390a1860316170e1a231cb0df8933a05d8fe8ca9bd47ad9b5e40605c07892a217e0fa3a6e21a427ad66b9fec61fce92a0a666e7f38c1381a09857420d2f3b418be8635de99d33a43395f78a280c5af3c2a06c5bdac3337c6d69882c349d78939e56ef81c1b02f8c5cde83f0f48315c2cdb6a0cb9780a93fcd75e4f0f8c6c213a7e6e25face921e8f8a58607c50dacfab50b3480\",
              \"0xf90211a0c9167eda1436935adb5bb8bfac1aa02ce825dae08644df2707fa04c29e43b535a081efca1ec0cdf4d1b0796b6afa8d18bcd90883ba22bc79d74069887777598850a0c4d94bcf7df0b9c6707deb12770d992c1e60724ec2f40633a02ef1c4375326bba0249717659c4e7adda14416a804ba5c9b305f9da2531a3ff6e6d74fca6380f4c2a0d09d667d89ec597ad86235b01ec43429f8191026206cae7fac6eee2eb3678471a00b7a913664bf4cc9bd454fc8af9d485f5263b86fbc8d42bbb1343399cb95ac7ca0c442a9ca2d734bb0b988f3dc83cc604fe5512e57fdb9c9649770b522c25b363ea03f2b45b47cdc12f020c55f6da3f7a348ec409de53a618b9cda4523c97d754b82a0d568b6a18b8b59f721090c04561b205ad885c215a81d535448826b139c7bdb59a01cccf60a81bbefbe73b241ebc9b9111e0101cbfb7e2a0ad1443b16b815729851a009abf1666d7d9202849314692d5ce1e51e5629727701044b37532ab3f9be50c0a05923155adc8cd3aceaf27c07858d290a3b85fc378fdd98e9f4f7f70d157f28baa0c55b2981a6fe08260cb6a076c76858d56aafdf255d0a12a2c50abe35d468c7e7a046025c07bd5eefcd21ba2edf808c1654543f995cf24de2af4b454a54d157c87ba06ef38fec665b8eb25934622af1112b9a9d52408c94d2c0124d6e24b7ff4296c0a0e134bcb34e458c9444d07b3dc6ac4995fee4a7b5341261af610eadc244fc275e80\",
              \"0xf8d1a02a85b6c4adf828a068d39f7bf4115a4544ebf32e007d63957a28ee21eb8dcd57a0344f34e01710ba897da06172844f373b281598b859086cf00c546594b955b87080a09bc4a42b6376f15f2639c98ad195b6fb948459cca93c568eacb33574b826a7af80a0525e7dd1bf391cf7df9ffaaa07093363a2c7a1c7d467d01403e368bd8c1f4e5680808080808080a0235db60b9fecfc721d53cb6624da22433e765569a8312e86a6f0b47faf4a2a23a0c8a623178e5953bcd108645d72bd6e53f6f24c3e70d1061cc1d3a02a7d5882fc8080\",
              \"0xf8719d3da65bd257638cf8cf09b8238888947cc3c0bea2aa2cc3f1c4ac7a3002b851f84f018b029c624a7e0660db777c07a086929f2999c4f58bfb6aa1e42dfccfd308623064d45f5ca6667b4efd4f5ee74da0d0a06b12ac47863b5c7be4185c2deaad1c61557033f56c7d4ea74429cbb25e23\"
            ],
            \"storageProof\": [
              {
                \"key\": \"0x75245230289a9f0bf73a6c59aef6651b98b3833a62a3c0bd9ab6b0dec8ed4d8f\",
                \"proof\": [
                  \"0xf90211a0ab59069d60a467a0c2808bf1aadc8be184a44aa9be0496392c60e43db71e48c6a0191746991ddf35edc982e5924493c201dd3eda5066844b0004bb45dcc3737c21a0f2f61e4a4d7e97090b2446cee86d1131cc734f677c549212dfa95f14bcde7100a067ded9ada4698e7b5c93e5a98903b078b56312d4c7fd6540737b65490151bffaa07957a581e4bbe0db76f28b68975a891115dace547bbc3141b71d0eea1994fbe1a0cdd5191b6a9b464168ce98c2246cd71275bf3c55f3896b376e8bfb0e19d831f1a05b70c6ca4074c11f35c674072c7f2889ecfe0215e18f7abe5af7426c55e71590a04a2718561c57e5330bcd9d44b360d27752794e6d01e6973bd6dd6a07a8228fd7a0c0e37636c557f48fd19207508076f5bd1a0121793f80985fdb6315217379ec49a0795774357597022dce82805a020e458d4750609e1181595c434c0f7cea19a30ea0844eff7435ccf182cc0e85c795971ea2e10a43f971a4dc8ee85de99abf695995a038fd5a640cbb54d2a2e688f81dc8a1940cde509b833483bf46955b4ce7f7d1cfa0c14ec36da748586235e4000bb6b45d0d2c267542b124e7630036757db5d6d2c1a0f979af54e8fbee1164aad7e9d0cefff08ac07e42c865079f42bdac3fd76f4a85a05773ec48219782bdacb409aeb9b825d8f31d289416750800b9dca2acde22f0f0a0a6dd844142d7c082be76a4c58a3c137ffb309f893d50cfec1fd61b3e4eb257b780\",
                  \"0xf90211a058e6d3ad8fba238af74d7d85d833e75268afc638ea1374ee3550beb0879cb734a04cd20b45b9f7ec690db6a2804d73d602748ba8315231552268f64f1a64ef9784a0e03e320152ccf8f04486f973d1c6a849a537e9be41c45c5fedddfc03bc11e994a082a8052f99f767a072aa21374db65d5208d209c15e9a58fdba88e19a5a8014c6a05bb327db4b954754d55c2d3168d6ab8e1e692df5e094981fbe2591bd19a95e74a00b47df35035acf61cf94963b07839aa041680a7985444d06a2974d27172b5722a0ad0760826cff34cdd251e517ab6957bd935841beaa3cd5fcd60c9b5a48690a45a087665007f65082e4ef460b201047ac49f1beb11ef1fe6fb2810a42d051d8016ba088e369aba9cdee9c24f353d8906c30cec98cc15dda6f36e49f92b7a6d0f56d0ba0b6cc3c2bfcb53e22cf20927e8d1a4db91737a03512574e3de7a13b6ba2667001a025d80283a03bd129dfa4b2d673ebc9f5885dfcfbc34df825e873639309c63895a0719adfc86e0127c2395d8afa5718d855b8ef3804cdb31dd331d7df0691f1b0fca076bf7fc96c99b566f591bba750cda256b1902c27e23eb9b7b20bbd58b298eabda0036daae0a929216e6b85d3e60527aef50c2232b2d73765ce80c47ae53520730ea0b767f91193fe721f70d2b11797db95999a9cdd82d0666c195da625226c7d68c8a0a4ef620d47110bad8d05b8b2f2d01a3fbbb3581f39e55eb9ffe26dc1779927e480\",
                  \"0xf90211a03e04b5b0468d6ba012d6a61a5a64ea23ca3f35ab30620632c673fd6d7b979ad0a002711c856c9678c3a87a13078f2f765f88e1602608c9d20416e53c44699c5b74a0d7dfa4d57b35ce69a9981acaccd92f84c82f36360b96a5b8dfd5a71be9c0699ea05e7fe77869c2f1d948b16eb95794e7ce2fad339df793abe2c986f5a7c907b89ca0a53d42c17b6c4a32419e50e151895d7ffaf6cabdb491a7981bb40d5c2c682770a0c29e4a77b3518500880472951112114918a3bd46ca8b1c54ba286a958e1f69b5a09be9a9a6120d6b2e266fabdf4ede18cd2fc724b504d3f575d0042020a6150d50a0739e262b03bfb4eed1b8d4e07068cc2e29ff8c32b48df150d5944223da193f12a0824cb033cc3404a0bb78c3f2691a46a7ff69e808a1da8c48288f69b7abdca0eca05b6e146a646ab8d4a6a32246ad400749a61567f4c62f94d9c798bbf258d835c7a0659c442f312e04443096a985fa0ae5e52aa059d7cd18b15c6276a148e10a94d1a0bc2dbf08b67178fb5fb30f19f877dea911a89c7c7317f032c5ecb9d76f7b36d9a06742029d1234ae5685a08ff1937643824773bebbb65ea09451e8aa1fb2cfab07a01e18192506573874c635151a03b53a7469c44003e6a27353a8fe60929e6f142ca0ea1ea4cf0338fce4bf7aaa2193d0cc57044e36c92f76424828504f818934dc47a0501a6bfd05c880f447e49313d3067e1b2ed5e7e4bfa215df479234df8f6f398880\",
                  \"0xf90211a0291216bdf05830ba8f4ab4dad26e362d774cbcec8ee636abfafa1d29c456e896a09c7d69b5d99a55f952794ac0f64750a1e9019b2be41041a87321f88c5f379cada0402e3755ffd4e6ba515425798e1d8149ed9672496c1cc059d13d69c2d6c8a5c7a03f6d7c95519867b95de24e3f3165d2daf31dfc5977f1a3a1e61c92eeb32a7404a033e221f00472b7f5c0258931922ee3aad406cc1666003585afc55647cd05d951a0e99f9aec41d8ac10c60ac119c4c4b72a5c798885e92b318dc367ab1ff457daaea096b46bab504c476317947d92f6c55ce2ce257bc9b4e74fd178c1c991da14afc4a0c52591fd67e9beb01ea630776a2eea1855a48061dbe1f052293b1c313c9d1cfaa0de80abda9d9bd4bb7159899a218035c2224001cb143a978f0b7c64f47560606ca07badb5b90ae9e4484cb20ad7f5440af1d2ae303bea443e4670d534bd2137a0e2a0a86b39b98d93306a9b0e6cb6bebc8400eb81416614c0a4c6c854731c150bebdca0f9028159400fa85492ad0f3e6dc9004b537b33810a3424b4809083a1a92cd62fa0e3a6c4c4937045066fb6e7894d223b7c0da3d727ab5a3641b1a2c36078bd4137a0f37d50e15de3dd41399994c3b0358da473b9829011cb8bcf4ae9cf26132e9358a03c1648ff472195bd9f6965cfb4568e3873974170e2e4cb7a5d73d6595096a9e4a0ae7bf91dc84d4c7d03408de90eb66984dc0787d6819019116bc3b0869cfe18fd80\",
                  \"0xf901f1a038114cf0d12c55115789d0c0d1885982cc08f78f0ef6523eabf149ca7e61bc91a0b024edda77cf69915dc8267138e8a0178ee00fdc2ab23c3b4f74b773b4f70384a0a6f07f5fd7042d9002302e38c5ff34cd13ce9261abc2239712b753e5a1f0d80ea090e7ed3e110f652ff10c09fce2a0a757c272539747acf98112b454bbf06161e1a082252c8ba9b23e8a2aaa59cf44e67d3bc225f7b34097223491572d3744f451a3a032633230beb9787fd3d18337480664cfad3fe1914ac7073e3d7d1a7b2046da60a025e1fa46e867bd4ceaec01a2fee6848a0ad3677a62f486b34211501436b8c9d9a0d24ff87dfe4edeef5294a8d6cff654c292f948b3f1a5d0f9ab75572e39187676a0af3ed17aa8d5773026bf63cbfefc7aede0db08f765b7c10db306ec46c6ff097ba0790cd852706505bf236d91ea21532eec80040dc85f01e233a4e6d6fa0edea66ca07623110c31a69d0745125b45a80d1a1093a4f4aa3f3d1f5f04e25ae78a4452cda0c3293fcb9ddf29c1f83c79286e03c5b9cb0c1e1071865cf0bc53f2f74980b25ba029e345c977e0fb502d48241ded7714f8b1468c4bf7aa1895a77d9784997ae9aea0c90434eb2d108a93beefc80d3dc30cae6f1beb4eac4a377f1ef001a0db579bdb80a0202136553a614bcbf61ae79e22b914a1b8a9df33bd6d877a5a5882f46f78302080\",
                  \"0xf891a03941d760c317eb688a0b5b90849793f6cd23c4f91bc883610daa6c4258f6ea398080808080a08950527f26eca59e77bf27730ee0d4e0e6608c94bd1c5673772f6977a5094ca480a023d59896c9d52c13f46178b52cf338595548015d965f218367046f56efe3b388a0968547182fbf284a86cc24f4f158c06aa5d33b11114b49905a3754018571040080808080808080\",
                  \"0xeb9e20b7009d0db9ab5cb1b2b1fe1a8bd0ad657d4ead0607b00fd7fd2fab501f8b8a014824bc963e66033b2c\"
                ],
                \"value\": \"0x14824bc963e66033b2c\"
              },
              {
                \"key\": \"0xc906b0b0df36e2042f059120e95e6dd99f11c9ac2ef306a59ba0efa77fd8622d\",
                \"proof\": [
                  \"0xf90211a0ab59069d60a467a0c2808bf1aadc8be184a44aa9be0496392c60e43db71e48c6a0191746991ddf35edc982e5924493c201dd3eda5066844b0004bb45dcc3737c21a0f2f61e4a4d7e97090b2446cee86d1131cc734f677c549212dfa95f14bcde7100a067ded9ada4698e7b5c93e5a98903b078b56312d4c7fd6540737b65490151bffaa07957a581e4bbe0db76f28b68975a891115dace547bbc3141b71d0eea1994fbe1a0cdd5191b6a9b464168ce98c2246cd71275bf3c55f3896b376e8bfb0e19d831f1a05b70c6ca4074c11f35c674072c7f2889ecfe0215e18f7abe5af7426c55e71590a04a2718561c57e5330bcd9d44b360d27752794e6d01e6973bd6dd6a07a8228fd7a0c0e37636c557f48fd19207508076f5bd1a0121793f80985fdb6315217379ec49a0795774357597022dce82805a020e458d4750609e1181595c434c0f7cea19a30ea0844eff7435ccf182cc0e85c795971ea2e10a43f971a4dc8ee85de99abf695995a038fd5a640cbb54d2a2e688f81dc8a1940cde509b833483bf46955b4ce7f7d1cfa0c14ec36da748586235e4000bb6b45d0d2c267542b124e7630036757db5d6d2c1a0f979af54e8fbee1164aad7e9d0cefff08ac07e42c865079f42bdac3fd76f4a85a05773ec48219782bdacb409aeb9b825d8f31d289416750800b9dca2acde22f0f0a0a6dd844142d7c082be76a4c58a3c137ffb309f893d50cfec1fd61b3e4eb257b780\",
                  \"0xf90211a0e65395b772dcd14e21d37188f5ea4a33b89c4428f456de9f9e212aec0283af7ca08744570c14d596dc8a53fab0b296e3f7bcc65bd8255af0a3201bd27c12182866a043a9153e31e2a2c282b4d1c03c6fad43a024293b783c30dc77a2e6f16cbce4baa07e53b568de6633b208ef8e365550e0a06bab85f36b7b09d592349c854c2c5633a0e69555c29953bffabb91f191748b0426c239658279ec7b6c93f5a7e319b53fe0a01a917121b7e2551b3aca77de1daab71ac7e1663f7b9c0e0974b016cee09dac26a039edcbc35550c55dde6aca8f2a8e4132ded11978eb7be622170ea0dfd8e39e0ea059b93e27470b6386f2382537460872e6894790a6310d5e8c7cadc172e01837c5a0042425fe198c0afe94ee50eb61a1062e5d2f3f16c380e3ce42ac4534bf89bf7da0ac5ae89537960604814278f8d70b2acaac7998b55443b9ec5225ccde7bc80537a067b5383f822ba31d2e707af1b1d5abdcab82b1bca94cd5f528212546566ff4b3a06bfda83e10a8111e5af2a6f24bb57740aff7f472e18f4593cad0d02c795a0ed6a040729bfa2c0b8f1c58602bb18bb767a220d126a6b6cc04bb5792d1c03cad161ca0cb6414dc5da867cb166638f5194728e6be14a0e4f4f05326a845ed787b6ebc3ba07608585919c35bd54147c14af6d3abde66d0be7332b63006bad61e317e06009da026c99891923b65e162a50df56127ca111f5c396571b04a1479ae481e101726b680\",
                  \"0xf90211a0271a5e3596f251977717844480ea1b817764e28169eb6d6378c962831018bb48a0bf7c212b2a8105219928c776a09c22205ee2b858f781725f1da79b54377f751ea0eeb7bc5b07e5f17e64e881bb30c8d690da56725ed960c1fecca8d4d5a71481e2a0a5dac9c84940a3c6a3fb05aab85abbb4216e0e992875cfc2377cbbdc75aac102a015e7c9d66633917923ec8314cd7ffbf863ce0a2e29334917fcd4f7e501377dd1a0987517a79c44f9e8dd52aef34fbf54a7fb1ab763c4e95c6c211ebc53c5df90bea0ee947931405ff0a06d8d59e05f9798c273cc50d89dc5601d8e8a3a76e24e1910a06d2d978ccbbc8fca277a02645105a15e315fba10385975f09c912615da54e443a0597fa1a1fb886695c0124565c0e07c52082a803b6da5cbae658f9604bcfb3d12a04a822c50342fb4c31becbf4905cce0ff12a41040685f336da694235499b02aeca002ce46da21c2301e6bf0a25b9791f51cc236a4de34b0767e0fe8248b0cd5cb28a03853c7bbe42c7238bff9219e95c1cb00970079ee0dc7f50c001bf1040caa44bda064c62b0c68a35fd56bdbf1b6b405d82bbc2bbad2c0e72a63287986a4d30471a1a046ce7fd4faecd35d1a6e002206c9a7f8632ae32a611037c8142c1e57f685dddca09950795f8f8110c699fe00d342a3b4cc428fc7f0cf3e12b56c10a02abe7a23eaa0e2d0dd4e73a4ec24c9b634444a535a0b67ca25d8ca21c589046252d6f8eed64b80\",
                  \"0xf90211a0c485e65a5d7d8a6d36c7eb4fded7fa4fb79a464204f52f0297276717954f6f1aa04eab201675e3c5f008eab94e3682e6eea9aa699735643b19b37df45d79361b23a032987e259f0c87b275fe757a71b2ca9c76b6a36c516d3dad29a3e1c139804e99a0ebc189cfac1e9a2b7bb6152cd845b36348784dcb641de72cef3867eaa2db9b49a0858062dc0ad1b32669801807a6fa02873f824b170901521cbf44eaed176e5767a0d544807bdd65e12f9434164332cd1c60e395998b8675abc87f14095cda0ec2b4a098a49e62a07acd1fb76f2b07a918e9c4cbc099b3f8abcde875c01c1411f73295a009c39d4c592fcda029fb16d3d859f3a6b44c15b856368a941f7665182eb01923a0f1a6dd4103f45cbdfd265ab117fdc459dcaa0f243a1eb319dbe2ace5aa02bed5a0efaad4db54bcdf3ee7c55c2a54970dbf1cd5c9ba24c6228296902ecae69f9c36a01164928c193232c06488c18e596a046e0a4c9710cd9dac5bf2e766f371288c7ea0922f7856e7c69f195d49af9b146cff29044099b40fb07f1f3fdbdfad784369d2a0ca5b93f4d20e29699d693c483e8a8ff6db300aaa9f3b97c3069bee70a5c96bf6a046cee7542b864d17e288adde6b317e476e62a82bcd5d9891c28fc9ba57c575a3a07f5d48bde2c66cdf12907bca31000060bca2b8327b99cf541d458bbd9d1f25a6a0bdc9ea1549fad3fe76df425400905c3c632903406d7ec48be3107022529a06f580\",
                  \"0xf90211a003f3a4a4ceec930d6c3add61922bd8917c04ca7cb319edae34c51123597456b9a0c0598ac335c213738af6bc1ffa958cf8f9dde67ee9c185068908c52435956daaa0c05a7fd4ddec9563419dba78ccd2feb0216f9b21cc26e6cf965ffcade7e3360ea0bd93913cdd9af9601bf3dbd7ebd753d04bd5491acba314c83b682c02140b4430a0723ba26a56e1f69741a6925ebb7a9d95749d49d05c21a4cadf866d84ee805bcea022302dfd3df627c51d00ecab6bcef1159f6f9a1949c4fcfb7da248e4f8e99aa7a0b4b5f84e39442d5402df4d527ca356b95bac921319df8b5cb5964a1bf9c5074fa04dce41e6593cc314c1beffae650b69d9ae7c84ce1f9344a9c8ec25c65667c135a07bd0609ce2c1934a0efc26fe04fbc4bd87483ea361d13c6a19c25a67ba5b740aa0d10d70cdce9ad1526919250cfffa13da9e8ccaa369ed23167936a5536d18ccf2a0019ae151408e20e9fff149626517bda9854cb674a2fd4ccc45a89b8c60243b2da0083af3e9c20a9b8bb0bace4065506cc90436530e46ff1984eb12abf01f3c3daaa001d60872c4dc5d73953af087b304ce9d651b2945aa7b5b16585ba72b76ed8ff0a03e33fdd1da66bd5cbd0b081ce936e466b19d73980f613579ac212cb03be2b79ea03ea7983385896ffb0bfc4de54e36bf25c42f482a3c2fe252eb9518144b1da5e5a018bc10a4605ed9de7a5573be4ac44e5fd6bb5d7cd83f11d1195c2570e55fc53b80\",
                  \"0xf8d18080a077944095f56a1071f3c7fee82eca000bf66046d4e16f06bb707f4e34656e0c90a0ad86ce515bf1aec68c45e2ca158dabbeb2cd14b32e3381b27fbaba5cb9afca418080a0fc4e4727852af6d5f5e7b2ed923a7a15dfe46563b1c1cd149a15f72aeda06b68a07ce14e487196d86a3a82ad4e625c335d6ff0a93b72ca4192d066aad9ad19a3768080a01976d005ed6d5a0213897b1853597b30f8ee33234259bbdee846fc78a62567f7808080a0f969b68d5a3f114ed12ba361fb0cb0182f86e991d8907b214524d2ece6dbc7618080\",
                  \"0xea9e203a4507c7ebf9d808c31140f694970a1a1822d224208be402d4699e437c8a8920d13d83394a516103\"
                ],
                \"value\": \"0x20d13d83394a516103\"
              }
            ]
          }]";
          
          let account = B160::from_str("0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2").unwrap();
          let nonce = 1;
          let mut cache_db = CacheDB::new(EmptyDB::default());
          populate_db_from_str(&mut cache_db, &acc_json).unwrap();

          assert_eq!(cache_db.basic(account).unwrap().unwrap().nonce, nonce);
    }
    
}